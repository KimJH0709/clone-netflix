(function(){"use strict";var e={3337:function(e,t,s){var i=s(5130),o=s(6768);const l={id:"app"};function a(e,t,s,i,a,n){const r=(0,o.g2)("NavBar"),c=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",l,[n.isLoginPage?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(r,{key:0})),(0,o.bF)(c)])}var n=s(4232);const r={class:"navbar"},c={key:0,class:"mobile-logout-container"};function u(e,t,s,i,l,a){const u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("nav",r,[t[8]||(t[8]=(0,o.Lk)("div",{class:"navbar-brand"},[(0,o.Lk)("a",{href:"/",class:"navbar-logo"},"NETFLIX")],-1)),(0,o.Lk)("button",{class:"hamburger-button",onClick:t[0]||(t[0]=(...e)=>a.toggleMenu&&a.toggleMenu(...e))},t[3]||(t[3]=[(0,o.Lk)("span",null,null,-1),(0,o.Lk)("span",null,null,-1),(0,o.Lk)("span",null,null,-1)])),(0,o.Lk)("ul",{class:(0,n.C4)(["navbar-links",{open:l.isMenuOpen}])},[(0,o.Lk)("li",null,[(0,o.bF)(u,{to:"/",onClick:a.closeMenu},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("홈")]))),_:1},8,["onClick"])]),(0,o.Lk)("li",null,[(0,o.bF)(u,{to:"/popular",onClick:a.closeMenu},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("대세 컨텐츠")]))),_:1},8,["onClick"])]),(0,o.Lk)("li",null,[(0,o.bF)(u,{to:"/search",onClick:a.closeMenu},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("찾아보기")]))),_:1},8,["onClick"])]),(0,o.Lk)("li",null,[(0,o.bF)(u,{to:"/wishlist",onClick:a.closeMenu},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("내가 찜한 리스트")]))),_:1},8,["onClick"])]),l.currentUser&&l.isMobile?((0,o.uX)(),(0,o.CE)("li",c,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.logout&&a.logout(...e)),class:"auth-button mobile-logout"},"로그아웃")])):(0,o.Q3)("",!0)],2),l.currentUser&&!l.isMobile?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>a.logout&&a.logout(...e)),class:"auth-button"},"로그아웃")):(0,o.Q3)("",!0)]),t[9]||(t[9]=(0,o.Lk)("div",{class:"content"},null,-1))])}s(4114);var d={name:"Navbar",data(){return{currentUser:null,isMenuOpen:!1,isMobile:!1}},methods:{logout(){localStorage.removeItem("currentUser"),this.currentUser=null,alert("You have been logged out."),this.$router.push({path:"/signin"})},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},closeMenu(){this.isMenuOpen=!1},updateIsMobile(){this.isMobile=window.innerWidth<=768}},mounted(){this.currentUser=localStorage.getItem("currentUser"),this.updateIsMobile(),window.addEventListener("resize",this.updateIsMobile)},beforeDestroy(){window.removeEventListener("resize",this.updateIsMobile)}},g=s(1241);const h=(0,g.A)(d,[["render",u],["__scopeId","data-v-81b24534"]]);var p=h,v={components:{NavBar:p},computed:{isLoginPage(){const e=this.$route;return"/signin"===e.path||"/signup"===e.path}},name:"App"};const m=(0,g.A)(v,[["render",a]]);var k=m,b=s(1387);const L={class:"homepage"},f={key:0,class:"top-movies-container"},P={class:"top-movie"},w=["src","alt"],M={class:"top-movie-info"},C={key:1,class:"movie-section"},y={class:"movie-scroll-container"},S=["onClick"],I=["src","alt"],E={key:2,class:"movie-section"},_={class:"movie-scroll-container"},x=["onClick"],U=["src","alt"],O=["src","alt"];function X(e,t,s,l,a,r){return(0,o.uX)(),(0,o.CE)("div",L,[a.topMovies.length?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("button",{class:"arrow left-arrow",onClick:t[0]||(t[0]=(...e)=>r.prevMovie&&r.prevMovie(...e))},"〈"),(0,o.Lk)("div",P,[(0,o.Lk)("img",{src:`https://image.tmdb.org/t/p/w1280${a.topMovies[a.currentIndex].backdrop_path}`,alt:a.topMovies[a.currentIndex].title},null,8,w),(0,o.Lk)("div",M,[(0,o.Lk)("h2",null,(0,n.v_)(a.topMovies[a.currentIndex].title),1),(0,o.Lk)("p",null,(0,n.v_)(a.topMovies[a.currentIndex].overview),1),t[6]||(t[6]=(0,o.Lk)("button",null,"재생",-1)),t[7]||(t[7]=(0,o.Lk)("button",null,"상세 정보",-1))])]),(0,o.Lk)("button",{class:"arrow right-arrow",onClick:t[1]||(t[1]=(...e)=>r.nextMovie&&r.nextMovie(...e))},"〉")])):(0,o.Q3)("",!0),a.popularMovies.length?((0,o.uX)(),(0,o.CE)("div",C,[t[8]||(t[8]=(0,o.Lk)("h2",null,"인기 영화",-1)),(0,o.Lk)("div",y,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.popularMovies.slice(0,20),(e=>((0,o.uX)(),(0,o.CE)("div",{class:"movie",key:e.id,onClick:t=>r.openModal(e)},[(0,o.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,I)],8,S)))),128))])])):(0,o.Q3)("",!0),a.latestMovies.length?((0,o.uX)(),(0,o.CE)("div",E,[t[9]||(t[9]=(0,o.Lk)("h2",null,"최신 영화",-1)),(0,o.Lk)("div",_,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.latestMovies.slice(0,20),(e=>((0,o.uX)(),(0,o.CE)("div",{class:"movie",key:e.id,onClick:t=>r.openModal(e)},[(0,o.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,U)],8,x)))),128))])])):(0,o.Q3)("",!0),a.isModalOpen?((0,o.uX)(),(0,o.CE)("div",{key:3,class:"modal-overlay",onClick:t[5]||(t[5]=(...e)=>r.closeModal&&r.closeModal(...e))},[(0,o.Lk)("div",{class:"modal-content",onClick:t[4]||(t[4]=(0,i.D$)((()=>{}),["stop"]))},[(0,o.Lk)("button",{class:"close-button",onClick:t[2]||(t[2]=(...e)=>r.closeModal&&r.closeModal(...e))},"X"),(0,o.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${a.selectedMovie.poster_path}`,alt:a.selectedMovie.title},null,8,O),(0,o.Lk)("h2",null,(0,n.v_)(a.selectedMovie.title),1),(0,o.Lk)("p",null,(0,n.v_)(a.selectedMovie.overview),1),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>r.addToWishlist(a.selectedMovie))},"찜하기")])])):(0,o.Q3)("",!0)])}s(8992),s(7550);var T=s(4373),F={name:"HomePage",data(){return{currentUser:null,topMovies:[],popularMovies:[],latestMovies:[],currentIndex:0,intervalId:null,isModalOpen:!1,selectedMovie:null}},methods:{nextMovie(){this.currentIndex=(this.currentIndex+1)%this.topMovies.length},prevMovie(){this.currentIndex=(this.currentIndex-1+this.topMovies.length)%this.topMovies.length},startAutoSlide(){this.intervalId=setInterval(this.nextMovie,5e3)},stopAutoSlide(){clearInterval(this.intervalId)},openModal(e){this.selectedMovie=e,this.isModalOpen=!0},closeModal(){this.isModalOpen=!1,this.selectedMovie=null},addToWishlist(e){if(!this.currentUser)return void alert("로그인이 필요합니다.");const t=`wishlist_${this.currentUser.email}`,s=JSON.parse(localStorage.getItem(t))||[];s.some((t=>t.id===e.id))?alert("이미 찜 목록에 추가된 영화입니다."):(s.push(e),localStorage.setItem(t,JSON.stringify(s)),alert("영화가 찜 목록에 추가되었습니다."))}},mounted(){const e=localStorage.getItem("currentUser");if(e){this.currentUser=JSON.parse(e);const t=this.currentUser.password;T.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${t}&language=ko-KR`).then((e=>{this.popularMovies=e.data.results,this.topMovies=this.popularMovies.slice(0,5)})).catch((e=>{console.error("Failed to fetch popular movies:",e)})),T.A.get(`https://api.themoviedb.org/3/movie/now_playing?api_key=${t}&language=ko-KR`).then((e=>{this.latestMovies=e.data.results})).catch((e=>{console.error("Failed to fetch latest movies:",e)}))}this.startAutoSlide()},beforeDestroy(){this.stopAutoSlide()}};const $=(0,g.A)(F,[["render",X]]);var V=$;const W={ref:"container",id:"container",class:"container"},J={class:"row"},N={class:"col align-items-center flex-col sign-up"},A={class:"form-wrapper align-items-center"},K={class:"form sign-up"},Q={class:"input-group"},R={class:"input-group"},j={class:"input-group"},H={class:"input-group checkbox-group"},D={class:"animated-checkbox"},G={class:"col align-items-center flex-col sign-in"},Y={class:"form-wrapper align-items-center"},z={class:"form sign-in"},B={class:"input-group"},q={class:"input-group"},Z={class:"input-group checkbox-group"},ee={class:"animated-checkbox"},te={class:"input-group checkbox-group"},se={class:"animated-checkbox"};function ie(e,t,s,l,a,n){return(0,o.uX)(),(0,o.CE)("div",W,[(0,o.Lk)("div",J,[(0,o.Lk)("div",N,[(0,o.Lk)("div",A,[(0,o.Lk)("div",K,[(0,o.Lk)("div",Q,[t[12]||(t[12]=(0,o.Lk)("i",{class:"bx bx-mail-send"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),placeholder:"Email"},null,512),[[i.Jo,a.email]])]),(0,o.Lk)("div",R,[t[13]||(t[13]=(0,o.Lk)("i",{class:"bx bxs-lock-alt"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),placeholder:"Password"},null,512),[[i.Jo,a.password]])]),(0,o.Lk)("div",j,[t[14]||(t[14]=(0,o.Lk)("i",{class:"bx bxs-lock-alt"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>a.confirmPassword=e),placeholder:"Confirm Password"},null,512),[[i.Jo,a.confirmPassword]])]),(0,o.Lk)("div",H,[(0,o.Lk)("label",D,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>a.agreeToTerms=e)},null,512),[[i.lH,a.agreeToTerms]]),t[15]||(t[15]=(0,o.Lk)("span",{class:"checkmark"},null,-1)),t[16]||(t[16]=(0,o.eW)(" I agree to the terms and conditions "))])]),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.register&&n.register(...e))},"Sign up"),(0,o.Lk)("p",null,[t[17]||(t[17]=(0,o.Lk)("span",null,"Already have an account?",-1)),(0,o.Lk)("b",{onClick:t[5]||(t[5]=(...e)=>n.toggle&&n.toggle(...e)),class:"pointer"},"Sign in here")])])])]),(0,o.Lk)("div",G,[(0,o.Lk)("div",Y,[(0,o.Lk)("div",z,[(0,o.Lk)("div",B,[t[18]||(t[18]=(0,o.Lk)("i",{class:"bx bx-mail-send"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[6]||(t[6]=e=>a.loginEmail=e),placeholder:"Email"},null,512),[[i.Jo,a.loginEmail]])]),(0,o.Lk)("div",q,[t[19]||(t[19]=(0,o.Lk)("i",{class:"bx bxs-lock-alt"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[7]||(t[7]=e=>a.loginPassword=e),placeholder:"Password"},null,512),[[i.Jo,a.loginPassword]])]),(0,o.Lk)("div",Z,[(0,o.Lk)("label",ee,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>a.rememberMe=e)},null,512),[[i.lH,a.rememberMe]]),t[20]||(t[20]=(0,o.Lk)("span",{class:"checkmark"},null,-1)),t[21]||(t[21]=(0,o.eW)(" Remember me "))])]),(0,o.Lk)("div",te,[(0,o.Lk)("label",se,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>a.autoLogin=e)},null,512),[[i.lH,a.autoLogin]]),t[22]||(t[22]=(0,o.Lk)("span",{class:"checkmark"},null,-1)),t[23]||(t[23]=(0,o.eW)(" Auto login "))])]),(0,o.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.login&&n.login(...e))},"Sign in"),t[25]||(t[25]=(0,o.Lk)("p",null,[(0,o.Lk)("b",null,"Forgot password?")],-1)),(0,o.Lk)("p",null,[t[24]||(t[24]=(0,o.Lk)("span",null,"Don't have an account?",-1)),(0,o.Lk)("b",{onClick:t[11]||(t[11]=(...e)=>n.toggle&&n.toggle(...e)),class:"pointer"},"Sign up here")])])])])])],512)}var oe={data(){return{email:"",password:"",confirmPassword:"",agreeToTerms:!1,loginEmail:"",loginPassword:"",rememberMe:!1,autoLogin:!1}},methods:{toggle(){this.$refs.container.classList.toggle("sign-in"),this.$refs.container.classList.toggle("sign-up")},register(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(e.test(this.email))if(this.email&&this.password&&this.confirmPassword&&this.agreeToTerms){if(this.password!==this.confirmPassword)return void alert("Passwords do not match");const e={email:this.email,password:this.password};localStorage.setItem(this.email,JSON.stringify(e)),alert("Registration successful!"),this.toggle()}else alert("Please fill in all fields and agree to the terms");else alert("Please enter a valid email address")},async login(){try{const e=JSON.parse(localStorage.getItem(this.loginEmail));e&&this.loginPassword===e.password?(alert("Login successful!"),localStorage.setItem("currentUser",JSON.stringify(e)),this.rememberMe?localStorage.setItem("rememberedEmail",this.loginEmail):localStorage.removeItem("rememberedEmail"),this.autoLogin?localStorage.setItem("autoLogin",!0):localStorage.removeItem("autoLogin"),this.$router.push({path:"/"})):alert("Invalid email or password")}catch(e){console.error("Failed to parse user data:",e),alert("Error reading user data. Please try again.")}},handleLogout(){localStorage.removeItem("currentUser"),localStorage.removeItem("autoLogin"),this.currentUser=null,alert("You have been logged out."),this.$router.push({path:"/signin"})}},mounted(){if(localStorage.getItem("autoLogin")){const e=localStorage.getItem("currentUser");if(e){this.loginEmail=e;const t=JSON.parse(localStorage.getItem(e));t&&(this.loginPassword=t.password,this.login())}}else{const e=localStorage.getItem("rememberedEmail");e&&(this.loginEmail=e,this.rememberMe=!0)}setTimeout((()=>{this.$refs.container.classList.add("sign-in")}),200)}};const le=(0,g.A)(oe,[["render",ie]]);var ae=le;const ne={class:"wishlist"},re={key:0,class:"empty-message"},ce={key:1},ue=["src","alt"],de=["onClick"],ge={key:2,class:"pagination"},he=["disabled"],pe=["disabled"];function ve(e,t,s,i,l,a){return(0,o.uX)(),(0,o.CE)("div",ne,[t[2]||(t[2]=(0,o.Lk)("h1",null,"내가 찜한 리스트",-1)),0===l.wishlistMovies.length?((0,o.uX)(),(0,o.CE)("div",re," 찜한 목록이 없습니다. ")):((0,o.uX)(),(0,o.CE)("ul",ce,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.paginatedMovies,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id,class:"movie-card"},[(0,o.Lk)("img",{src:`https://image.tmdb.org/t/p/w200${e.poster_path}`,alt:e.title},null,8,ue),(0,o.Lk)("h3",null,(0,n.v_)(e.title),1),(0,o.Lk)("button",{onClick:t=>a.removeFromWishlist(e.id)},"찜 지우기",8,de)])))),128))])),l.wishlistMovies.length>0?((0,o.uX)(),(0,o.CE)("div",ge,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.prevPage&&a.prevPage(...e)),disabled:1===l.currentPage},"이전",8,he),(0,o.Lk)("span",null,(0,n.v_)(l.currentPage)+" / "+(0,n.v_)(a.totalPages),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.nextPage&&a.nextPage(...e)),disabled:l.currentPage===a.totalPages},"다음",8,pe)])):(0,o.Q3)("",!0)])}s(4520);var me={name:"WishlistPage",data(){return{wishlistMovies:[],currentUserEmail:null,currentPage:1,itemsPerPage:15}},computed:{paginatedMovies(){const e=(this.currentPage-1)*this.itemsPerPage;return this.wishlistMovies.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.wishlistMovies.length/this.itemsPerPage)}},methods:{loadWishlist(){const e=`wishlist_${this.currentUserEmail}`;this.wishlistMovies=JSON.parse(localStorage.getItem(e))||[]},removeFromWishlist(e){this.wishlistMovies=this.wishlistMovies.filter((t=>t.id!==e));const t=`wishlist_${this.currentUserEmail}`;localStorage.setItem(t,JSON.stringify(this.wishlistMovies)),alert("영화를 찜 목록에서 제거했습니다."),this.currentPage>this.totalPages&&(this.currentPage=this.totalPages)},nextPage(){this.currentPage<this.totalPages&&(this.currentPage+=1)},prevPage(){this.currentPage>1&&(this.currentPage-=1)}},mounted(){const e=JSON.parse(localStorage.getItem("currentUser"));e&&e.email?(this.currentUserEmail=e.email,this.loadWishlist()):(alert("로그인이 필요합니다."),this.$router.push("/signin"))}};const ke=(0,g.A)(me,[["render",ve],["__scopeId","data-v-760a5eaf"]]);var be=ke;const Le={class:"view-selector"},fe={key:0,class:"table-view"},Pe={key:0,class:"movies-grid"},we=["src","alt"],Me=["onClick"],Ce={class:"pagination"},ye=["disabled"],Se=["disabled"],Ie={key:1,class:"infinite-scroll-view"},Ee={key:0,class:"movies-grid"},_e=["src","alt"],xe=["onClick"],Ue={key:0,class:"loading"};function Oe(e,t,s,i,l,a){return(0,o.uX)(),(0,o.CE)("div",{class:"page-container",onScrollPassive:t[4]||(t[4]=(...e)=>a.handleScroll&&a.handleScroll(...e))},[(0,o.Lk)("div",Le,[(0,o.Lk)("button",{class:(0,n.C4)({active:l.isTableView}),onClick:t[0]||(t[0]=(...e)=>a.setTableView&&a.setTableView(...e))},t[5]||(t[5]=[(0,o.Lk)("i",{class:"fas fa-th"},null,-1),(0,o.eW)(" Table View ")]),2),(0,o.Lk)("button",{class:(0,n.C4)({active:!l.isTableView}),onClick:t[1]||(t[1]=(...e)=>a.setInfiniteScrollView&&a.setInfiniteScrollView(...e))},t[6]||(t[6]=[(0,o.Lk)("i",{class:"fas fa-stream"},null,-1),(0,o.eW)(" Infinite Scroll View ")]),2)]),l.isTableView?((0,o.uX)(),(0,o.CE)("div",fe,[l.movies.length?((0,o.uX)(),(0,o.CE)("div",Pe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.movies,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"movie-card"},[(0,o.Lk)("img",{src:`https://image.tmdb.org/t/p/w200${e.poster_path}`,alt:e.title},null,8,we),(0,o.Lk)("button",{class:"add-to-wishlist",onClick:t=>a.addToWishlist(e)},"찜하기",8,Me)])))),128))])):(0,o.Q3)("",!0),(0,o.Lk)("div",Ce,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>a.prevPage&&a.prevPage(...e)),disabled:1===l.currentPage},"이전",8,ye),(0,o.Lk)("span",null,"페이지 "+(0,n.v_)(l.currentPage)+" / "+(0,n.v_)(l.totalPages),1),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.nextPage&&a.nextPage(...e)),disabled:l.currentPage===l.totalPages},"다음",8,Se)])])):((0,o.uX)(),(0,o.CE)("div",Ie,[l.movies.length?((0,o.uX)(),(0,o.CE)("div",Ee,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.movies,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"movie-card"},[(0,o.Lk)("img",{src:`https://image.tmdb.org/t/p/w200${e.poster_path}`,alt:e.title},null,8,_e),(0,o.Lk)("button",{class:"add-to-wishlist",onClick:t=>a.addToWishlist(e)},"찜하기",8,xe)])))),128)),l.loading?((0,o.uX)(),(0,o.CE)("div",Ue,"로딩 중...")):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]))],32)}var Xe={name:"PopularPage",data(){return{movies:[],currentPage:1,totalPages:0,isTableView:!0,loading:!1,currentUser:null}},methods:{async fetchMovies(e=1){if(!this.loading)try{const{currentUser:t}=this;if(!t||!t.password)return alert("로그인이 필요합니다."),void this.$router.push("/signin");const s=t.password;this.loading=!0;const i=await T.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${s}&language=ko-KR&page=${e}`);this.loading=!1,this.isTableView?(this.movies=i.data.results,this.totalPages=Math.min(i.data.total_pages,10)):(this.movies=[...this.movies,...i.data.results],this.totalPages=i.data.total_pages)}catch(t){this.loading=!1,console.error("영화 데이터를 가져오는 데 실패했습니다:",t),alert("영화 데이터를 가져오는 데 실패했습니다.")}},setTableView(){this.isTableView=!0,this.movies=[],this.currentPage=1,this.fetchMovies(this.currentPage)},setInfiniteScrollView(){this.isTableView=!1,this.movies=[],this.currentPage=1,this.fetchMovies(this.currentPage)},prevPage(){this.currentPage>1&&(this.currentPage-=1,this.fetchMovies(this.currentPage))},nextPage(){this.currentPage<this.totalPages&&(this.currentPage+=1,this.fetchMovies(this.currentPage))},handleScroll(){const e=window.scrollY,{clientHeight:t}=document.documentElement,{scrollHeight:s}=document.documentElement;e+t>=s-50&&!this.isTableView&&this.currentPage<this.totalPages&&!this.loading&&(this.currentPage+=1,this.fetchMovies(this.currentPage))},addToWishlist(e){if(!this.currentUser||!this.currentUser.email)return alert("로그인이 필요합니다."),void this.$router.push("/signin");const t=`wishlist_${this.currentUser.email}`,s=JSON.parse(localStorage.getItem(t))||[];s.some((t=>t.id===e.id))?alert("이미 위시리스트에 추가된 영화입니다."):(s.push(e),localStorage.setItem(t,JSON.stringify(s)),alert(`${e.title}이(가) 위시리스트에 추가되었습니다.`))}},mounted(){const e=localStorage.getItem("currentUser");e?this.currentUser=JSON.parse(e):(alert("로그인이 필요합니다."),this.$router.push("/signin")),this.fetchMovies(this.currentPage),window.addEventListener("scroll",this.handleScroll)},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll)}};const Te=(0,g.A)(Xe,[["render",Oe],["__scopeId","data-v-f5d4e068"]]);var Fe=Te;const $e={class:"search-page"},Ve={class:"filters"},We=["value"],Je={key:0},Ne={class:"movies-grid"},Ae=["src","alt"],Ke=["onClick"],Qe={class:"pagination"},Re=["disabled"],je=["disabled"],He={key:1};function De(e,t,s,l,a,r){return(0,o.uX)(),(0,o.CE)("div",$e,[(0,o.Lk)("div",Ve,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.selectedGenre=e),onChange:t[1]||(t[1]=(...e)=>r.applyFilters&&r.applyFilters(...e))},[t[9]||(t[9]=(0,o.Lk)("option",{value:""},"장르 선택",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.genres,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name),9,We)))),128))],544),[[i.u1,a.selectedGenre]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.selectedRating=e),onChange:t[3]||(t[3]=(...e)=>r.applyFilters&&r.applyFilters(...e))},t[10]||(t[10]=[(0,o.Fv)('<option value="" data-v-697b31c4>평점 선택</option><option value="8" data-v-697b31c4>8점 이상</option><option value="7" data-v-697b31c4>7점 이상</option><option value="6" data-v-697b31c4>6점 이상</option><option value="5" data-v-697b31c4>5점 이상</option>',5)]),544),[[i.u1,a.selectedRating]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.selectedSort=e),onChange:t[5]||(t[5]=(...e)=>r.applyFilters&&r.applyFilters(...e))},t[11]||(t[11]=[(0,o.Lk)("option",{value:"popularity.desc"},"인기순",-1),(0,o.Lk)("option",{value:"release_date.desc"},"최신순",-1),(0,o.Lk)("option",{value:"vote_average.desc"},"평점순",-1)]),544),[[i.u1,a.selectedSort]]),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.resetFilters&&r.resetFilters(...e))},"초기화")]),a.movies.length?((0,o.uX)(),(0,o.CE)("div",Je,[(0,o.Lk)("div",Ne,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.movies,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"movie-card"},[(0,o.Lk)("img",{src:`https://image.tmdb.org/t/p/w200${e.poster_path}`,alt:e.title},null,8,Ae),(0,o.Lk)("button",{class:"add-to-wishlist",onClick:t=>r.addToWishlist(e)}," 찜하기 ",8,Ke)])))),128))]),(0,o.Lk)("div",Qe,[(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>r.prevPage&&r.prevPage(...e)),disabled:1===a.currentPage},"이전",8,Re),(0,o.Lk)("span",null,"페이지 "+(0,n.v_)(a.currentPage)+" / "+(0,n.v_)(a.totalPages),1),(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>r.nextPage&&r.nextPage(...e)),disabled:a.currentPage===a.totalPages},"다음",8,je)])])):((0,o.uX)(),(0,o.CE)("div",He,t[12]||(t[12]=[(0,o.Lk)("p",null,"영화 데이터를 불러올 수 없습니다.",-1)])))])}var Ge={name:"SearchPage",data(){return{movies:[],currentPage:1,moviesPerPage:10,totalPages:1,genres:[{id:28,name:"액션"},{id:12,name:"모험"},{id:35,name:"코미디"},{id:80,name:"범죄"},{id:16,name:"애니메이션"}],selectedGenre:"",selectedRating:"",selectedSort:"popularity.desc",loading:!1,wishlist:JSON.parse(localStorage.getItem("wishlist"))||[]}},methods:{async fetchMovies(){try{const e=JSON.parse(localStorage.getItem("currentUser")).password;this.loading=!0;const t=await T.A.get("https://api.themoviedb.org/3/discover/movie",{params:{api_key:e,language:"ko-KR",sort_by:this.selectedSort,with_genres:this.selectedGenre,"vote_average.gte":this.selectedRating,page:this.currentPage}});this.loading=!1,this.movies=t.data.results;const s=Math.ceil(t.data.total_results/this.moviesPerPage);this.totalPages=Math.min(s,10)}catch(e){this.loading=!1,console.error("영화 데이터를 가져오는 데 실패했습니다:",e),alert("영화 데이터를 가져오는 데 실패했습니다.")}},addToWishlist(e){if(!this.currentUser)return void alert("로그인이 필요합니다.");const t=`wishlist_${this.currentUser.email}`,s=JSON.parse(localStorage.getItem(t))||[];s.some((t=>t.id===e.id))?alert("이미 위시리스트에 추가된 영화입니다."):(s.push(e),localStorage.setItem(t,JSON.stringify(s)),alert(`${e.title}이(가) 위시리스트에 추가되었습니다.`))},prevPage(){this.currentPage>1&&(this.currentPage-=1,this.fetchMovies())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage+=1,this.fetchMovies())},applyFilters(){this.movies=[],this.currentPage=1,this.fetchMovies()},resetFilters(){this.selectedGenre="",this.selectedRating="",this.selectedSort="popularity.desc",this.applyFilters()}},mounted(){const e=localStorage.getItem("currentUser");e&&(this.currentUser=JSON.parse(e)),this.fetchMovies()}};const Ye=(0,g.A)(Ge,[["render",De],["__scopeId","data-v-697b31c4"]]);var ze=Ye;const Be=[{path:"/",name:"Home",component:V,meta:{requiresAuth:!0}},{path:"/signin",name:"Auth",component:ae},{path:"/wishlist",name:"Wishlist",component:be},{path:"/popular",name:"Popular",component:Fe},{path:"/search",name:"Search",component:ze}],qe=(0,b.aE)({history:(0,b.LA)(),routes:Be});var Ze=qe;(0,i.Ef)(k).use(Ze).mount("#app")}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var l=t[i]={exports:{}};return e[i].call(l.exports,l,l.exports,s),l.exports}s.m=e,function(){var e=[];s.O=function(t,i,o,l){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],o=e[u][1],l=e[u][2];for(var n=!0,r=0;r<i.length;r++)(!1&l||a>=l)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(n=!1,l<a&&(a=l));if(n){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[i,o,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,l,a=i[0],n=i[1],r=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(r)var u=r(s)}for(t&&t(i);c<a.length;c++)l=a[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(u)},i=self["webpackChunknetflix_clone"]=self["webpackChunknetflix_clone"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(3337)}));i=s.O(i)})();
//# sourceMappingURL=app.33bf6ca3.js.map